#--------------------------- Pixelbook specific tweaks -----------------------#
set $scripts "~/dotfiles/pixelbook"

# Set scaling factor. Note that fractional scaling causes bluriness in Xwayland
output eDP-1 res 2400x1600 scale 1.33333333

# Improve touchpad behavior
input "type:touchpad" {
    accel_profile adaptive
    pointer_accel 0
    dwt disabled
}

# Make the touchscreen input transform with the screen when rotated
input {
    "type:touch"       map_to_output eDP-1
    "type:tablet_tool" map_to_output eDP-1
}

# Idle behavior
exec swayidle \
    timeout 540 "$lock-slow" \
    timeout 600 "brightnessctl --save set 0%" \
        resume "brightnessctl --restore" \
    timeout 30 "$scripts/keyboard-backlight.sh dim" \
        resume "$scripts/keyboard-backlight.sh restore"

bindsym {
    # Pixelbook's hamburger menu button is mapped to XF86Tools
    XF86Tools      exec $optionsmenu
    $mod+XF86Tools exec $lock

    # /etc/systemd/logind.conf is edited to add HandlePowerKey=ignore so Sway
    # can handle the XF86PowerOff button instead
    XF86PowerOff   exec $lock

    # Volume control
    XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5%
    XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
    XF86AudioMute        exec pactl set-sink-mute   @DEFAULT_SINK@ toggle

    # Backlight control
    XF86MonBrightnessUp        exec brightnessctl set +5%
    XF86MonBrightnessDown      exec brightnessctl set 5%-
    $mod+XF86MonBrightnessUp   exec "$scripts/keyboard-backlight.sh up"
    $mod+XF86MonBrightnessDown exec "$scripts/keyboard-backlight.sh down"
}
#-----------------------------------------------------------------------------#
